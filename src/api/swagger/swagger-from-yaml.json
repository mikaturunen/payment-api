{
  "swagger" : "2.0",
  "info" : {
    "description" : "Simple API for making, refunding and tracking payments and their statuses for different commercial business needs.",
    "version" : "0.0.1",
    "title" : "Ecommerce API",
    "contact" : {
      "name" : "API support",
      "url" : "http://mikaturunen.eu",
      "email" : "mika.turunen@ymail.com"
    },
    "license" : {
      "name" : "MIT",
      "url" : "https://opensource.org/licenses/MIT"
    }
  },
  "host" : "localhost:3002",
  "basePath" : "/",
  "schemes" : [ "http", "https" ],
  "consumes" : [ "application/json" ],
  "produces" : [ "application/json" ],
  "paths" : {
    "/swagger" : {
      "x-swagger-pipe" : "swagger_raw"
    },
    "/v1/payment/open/single" : {
      "post" : {
        "description" : "Creates a single open payment. Response is a fully functional payment wall JSON. Iterate over the response and render the buttons and create valid HTML from it.",
        "operationId" : "openPayment",
        "parameters" : [ {
          "in" : "body",
          "name" : "OpenPayment",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/BodyOpenPayment"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "x-swagger-router-controller" : "v1/payment"
    },
    "/v1/payment/open/shop-in-shop" : {
      "post" : {
        "description" : "Creates a single open shop-in-shop payment. Response is a fully functional payment wall JSON. Iterate over the response and render the buttons and create valid HTML from it.",
        "operationId" : "openPayment",
        "parameters" : [ {
          "in" : "body",
          "name" : "OpenPaymentShopInShop",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/BodyOpenPayment"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "x-swagger-router-controller" : "v1/payment-shop-in-shop"
    },
    "/v1/payment/poll/single" : {
      "post" : {
        "description" : "Polls the payment status for given payment.",
        "operationId" : "pollPayment",
        "parameters" : [ {
          "in" : "body",
          "name" : "pollPayment",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/BodyPollPayment"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "x-swagger-router-controller" : "v1/poll"
    },
    "/v1/payment/poll/shop-in-shop" : {
      "post" : {
        "description" : "Polls the payment status for given payment.",
        "operationId" : "pollPaymentShopInShop",
        "parameters" : [ {
          "in" : "body",
          "name" : "pollPaymentShopInShop",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/BodyPollPayment"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "x-swagger-router-controller" : "v1/poll"
    },
    "/v1/payment/refund" : {
      "post" : {
        "description" : "Refunds a given item from a payment. Can also refund the whole payment.",
        "operationId" : "refundPayment",
        "parameters" : [ {
          "in" : "body",
          "name" : "RefundPayment",
          "required" : true,
          "schema" : {
            "$ref" : "#/definitions/BodyRefundPayment"
          }
        } ],
        "responses" : {
          "200" : {
            "description" : "Success"
          }
        }
      },
      "x-swagger-router-controller" : "v1/refund"
    }
  },
  "definitions" : {
    "BodyOpenPayment" : {
      "type" : "object",
      "required" : [ "hmac", "merchantId", "payment" ],
      "properties" : {
        "merchantId" : {
          "type" : "string",
          "example" : "375917"
        },
        "hmac" : {
          "type" : "string",
          "minLength" : 10
        },
        "payment" : {
          "$ref" : "#/definitions/OpenPayment"
        }
      }
    },
    "BodyRefundPayment" : {
      "type" : "object",
      "required" : [ "hmac", "merchantId", "stamp" ],
      "properties" : {
        "merchantId" : {
          "type" : "string",
          "example" : "375917"
        },
        "stamp" : {
          "type" : "string",
          "example" : "1233214"
        },
        "hmac" : {
          "type" : "string",
          "minLength" : 10
        },
        "payment" : {
          "$ref" : "#/definitions/BodyRefundPayment_payment"
        }
      }
    },
    "BodyPollPayment" : {
      "type" : "object",
      "required" : [ "hmac", "merchantId" ],
      "properties" : {
        "merchantId" : {
          "type" : "string",
          "example" : "375917"
        },
        "hmac" : {
          "type" : "string",
          "minLength" : 10
        },
        "poll" : {
          "$ref" : "#/definitions/BodyPollPayment_poll"
        }
      }
    },
    "OpenPayment" : {
      "required" : [ "content", "country", "currency", "customer", "delivery", "items", "language", "message", "redirect", "reference", "stamp", "totalAmount" ],
      "properties" : {
        "merchantId" : {
          "type" : "string"
        },
        "totalAmount" : {
          "type" : "integer",
          "format" : "int32",
          "minimum" : 100
        },
        "currency" : {
          "type" : "string"
        },
        "reference" : {
          "type" : "string"
        },
        "stamp" : {
          "type" : "string"
        },
        "items" : {
          "type" : "array",
          "items" : {
            "$ref" : "#/definitions/PaymentItem"
          }
        },
        "delivery" : {
          "$ref" : "#/definitions/DeliveryAddress"
        },
        "content" : {
          "type" : "number"
        },
        "country" : {
          "type" : "string"
        },
        "language" : {
          "type" : "string"
        },
        "message" : {
          "type" : "string",
          "minLength" : 0
        },
        "customer" : {
          "$ref" : "#/definitions/MerchantCustomer"
        },
        "redirect" : {
          "$ref" : "#/definitions/RedirectControl"
        }
      }
    },
    "PaymentItem" : {
      "required" : [ "amount", "categoryCode", "deliveryDate", "description", "merchant", "reference", "stamp", "vatPercentage" ],
      "properties" : {
        "reference" : {
          "type" : "string"
        },
        "stamp" : {
          "type" : "string"
        },
        "amount" : {
          "type" : "integer",
          "format" : "int32"
        },
        "merchant" : {
          "$ref" : "#/definitions/Merchant"
        },
        "description" : {
          "type" : "string",
          "minLength" : 0,
          "maxLength" : 150
        },
        "categoryCode" : {
          "type" : "string",
          "minLength" : 1,
          "maxLength" : 20
        },
        "deliveryDate" : {
          "type" : "string",
          "minLength" : 8,
          "maxLength" : 10
        },
        "vatPercentage" : {
          "type" : "integer",
          "format" : "int32",
          "minimum" : 0,
          "maximum" : 100
        }
      }
    },
    "RedirectControl" : {
      "required" : [ "cancel", "delayed", "reject", "return" ],
      "properties" : {
        "return" : {
          "type" : "string"
        },
        "delayed" : {
          "type" : "string"
        },
        "cancel" : {
          "type" : "string"
        },
        "reject" : {
          "type" : "string"
        }
      }
    },
    "MerchantCustomer" : {
      "required" : [ "email", "firstName", "lastName" ],
      "properties" : {
        "firstName" : {
          "type" : "string",
          "minLength" : 2,
          "maxLength" : 100
        },
        "lastName" : {
          "type" : "string",
          "minLength" : 2,
          "maxLength" : 100
        },
        "email" : {
          "type" : "string"
        }
      }
    },
    "Merchant" : {
      "required" : [ "email", "id", "name", "vatId" ],
      "properties" : {
        "id" : {
          "type" : "string"
        },
        "name" : {
          "type" : "string",
          "maxLength" : 45
        },
        "email" : {
          "type" : "string"
        },
        "vatId" : {
          "type" : "string"
        }
      }
    },
    "DeliveryAddress" : {
      "required" : [ "city", "country", "county", "postalCode", "streetAddress" ],
      "properties" : {
        "postalCode" : {
          "type" : "string",
          "minLength" : 2,
          "maxLength" : 10
        },
        "city" : {
          "type" : "string",
          "maxLength" : 20
        },
        "country" : {
          "type" : "string",
          "minLength" : 2,
          "maxLength" : 20
        },
        "county" : {
          "type" : "string",
          "maxLength" : 40
        },
        "streetAddress" : {
          "type" : "string",
          "minLength" : 5,
          "maxLength" : 100
        }
      }
    },
    "BodyRefundPayment_payment_receiver" : {
      "required" : [ "email" ],
      "properties" : {
        "email" : {
          "type" : "string"
        }
      }
    },
    "BodyRefundPayment_payment" : {
      "required" : [ "amount", "reference", "stamp" ],
      "properties" : {
        "stamp" : {
          "type" : "string"
        },
        "reference" : {
          "type" : "string"
        },
        "amount" : {
          "type" : "integer",
          "format" : "int32",
          "minimum" : 100
        },
        "receiver" : {
          "$ref" : "#/definitions/BodyRefundPayment_payment_receiver"
        }
      }
    },
    "BodyPollPayment_poll" : {
      "required" : [ "amount", "currency", "reference", "stamp" ],
      "properties" : {
        "stamp" : {
          "type" : "string",
          "example" : "1233214"
        },
        "reference" : {
          "type" : "string"
        },
        "amount" : {
          "type" : "integer",
          "format" : "int32",
          "minimum" : 100
        },
        "currency" : {
          "type" : "string",
          "example" : "EUR"
        }
      }
    }
  }
}